#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ç”Ÿæˆé™éŸ³å ä½éŸ³é¢‘æ–‡ä»¶è„šæœ¬
Generated by Qoder AI (Model: claude-sonnet-4-5-20250929) - 2025-10-23
Task: åˆ›å»ºä¸´æ—¶é™éŸ³å ä½éŸ³é¢‘ï¼Œç”¨äºå¼€å‘æµ‹è¯•
"""

import os
import wave
import struct

def create_silent_audio(duration_sec, filename):
    """
    åˆ›å»ºé™éŸ³MP3å ä½æ–‡ä»¶
    
    æ³¨æ„ï¼šæ­¤è„šæœ¬åˆ›å»ºWAVæ ¼å¼ï¼Œéœ€è¦FFmpegè½¬æ¢ä¸ºMP3
    å¦‚æœæœ‰FFmpegï¼Œä½¿ç”¨å‘½ä»¤ï¼š
    ffmpeg -f lavfi -i anullsrc=r=44100:cl=mono -t {duration} -q:a 9 -acodec libmp3lame {filename}
    """
    sample_rate = 44100
    num_channels = 1  # å•å£°é“ï¼ˆéŸ³æ•ˆï¼‰
    sample_width = 2  # 16ä½
    num_frames = int(sample_rate * duration_sec)
    
    # åˆ›å»ºWAVæ–‡ä»¶
    wav_filename = filename.replace('.mp3', '.wav')
    with wave.open(wav_filename, 'w') as wav_file:
        wav_file.setnchannels(num_channels)
        wav_file.setsampwidth(sample_width)
        wav_file.setframerate(sample_rate)
        
        # å†™å…¥é™éŸ³æ•°æ®
        for _ in range(num_frames):
            wav_file.writeframes(struct.pack('<h', 0))
    
    print(f"âœ… åˆ›å»ºé™éŸ³éŸ³é¢‘: {wav_filename} ({duration_sec}ç§’)")
    return wav_filename

def create_music_silent_audio(duration_sec, filename):
    """åˆ›å»ºç«‹ä½“å£°é™éŸ³éŸ³é¢‘ï¼ˆç”¨äºéŸ³ä¹ï¼‰"""
    sample_rate = 44100
    num_channels = 2  # ç«‹ä½“å£°ï¼ˆéŸ³ä¹ï¼‰
    sample_width = 2  # 16ä½
    num_frames = int(sample_rate * duration_sec)
    
    wav_filename = filename.replace('.mp3', '.wav')
    with wave.open(wav_filename, 'w') as wav_file:
        wav_file.setnchannels(num_channels)
        wav_file.setsampwidth(sample_width)
        wav_file.setframerate(sample_rate)
        
        # å†™å…¥ç«‹ä½“å£°é™éŸ³æ•°æ®
        for _ in range(num_frames):
            wav_file.writeframes(struct.pack('<hh', 0, 0))
    
    print(f"âœ… åˆ›å»ºé™éŸ³éŸ³ä¹: {wav_filename} ({duration_sec}ç§’)")
    return wav_filename

def main():
    """ä¸»å‡½æ•°"""
    print("=" * 60)
    print("ç”Ÿæˆé™éŸ³å ä½éŸ³é¢‘æ–‡ä»¶")
    print("=" * 60)
    print()
    print("âš ï¸  è­¦å‘Šï¼šæ­¤è„šæœ¬ä»…åˆ›å»ºç”¨äºæµ‹è¯•çš„é™éŸ³æ–‡ä»¶")
    print("   æ­£å¼å‘å¸ƒå‰å¿…é¡»æ›¿æ¢ä¸ºçœŸå®éŸ³é¢‘ï¼")
    print()
    
    # ç¡®ä¿ç›®å½•å­˜åœ¨
    sounds_dir = os.path.join('assets', 'sounds')
    music_dir = os.path.join('assets', 'sounds', 'music')
    
    os.makedirs(sounds_dir, exist_ok=True)
    os.makedirs(music_dir, exist_ok=True)
    
    # ç”ŸæˆéŸ³æ•ˆæ–‡ä»¶
    print("ğŸ”Š ç”ŸæˆéŸ³æ•ˆå ä½æ–‡ä»¶ï¼ˆWAVæ ¼å¼ï¼‰...")
    sound_files = {
        'select.mp3': 0.3,
        'move.mp3': 0.4,
        'capture.mp3': 0.7,
        'win.mp3': 2.0,
        'lose.mp3': 2.0,
        'click.mp3': 0.2,
    }
    
    for filename, duration in sound_files.items():
        create_silent_audio(duration, os.path.join(sounds_dir, filename))
    
    # ç”ŸæˆéŸ³ä¹æ–‡ä»¶
    print()
    print("ğŸµ ç”ŸæˆéŸ³ä¹å ä½æ–‡ä»¶ï¼ˆWAVæ ¼å¼ï¼‰...")
    music_files = {
        'main.mp3': 90,
        'gameplay.mp3': 90,
        'victory.mp3': 25,
        'classic.mp3': 90,
        'night.mp3': 90,
    }
    
    for filename, duration in music_files.items():
        create_music_silent_audio(duration, os.path.join(music_dir, filename))
    
    print()
    print("=" * 60)
    print("âœ… é™éŸ³å ä½æ–‡ä»¶ç”Ÿæˆå®Œæˆï¼ˆWAVæ ¼å¼ï¼‰")
    print()
    print("âš ï¸  ä¸‹ä¸€æ­¥ï¼šè½¬æ¢ä¸ºMP3æ ¼å¼")
    print()
    print("æ–¹æ³•1 - ä½¿ç”¨FFmpegï¼ˆæ¨èï¼‰ï¼š")
    print("  å®‰è£…: choco install ffmpeg  (Windows)")
    print("  è½¬æ¢å•ä¸ªæ–‡ä»¶:")
    print("    ffmpeg -i assets/sounds/select.wav -q:a 9 assets/sounds/select.mp3")
    print()
    print("  æ‰¹é‡è½¬æ¢æ‰€æœ‰æ–‡ä»¶:")
    print("    PowerShell:")
    print("      Get-ChildItem assets\\sounds\\*.wav -Recurse | ForEach-Object {")
    print("        $mp3 = $_.FullName -replace '\\.wav$', '.mp3'")
    print("        ffmpeg -i $_.FullName -q:a 9 $mp3")
    print("      }")
    print()
    print("æ–¹æ³•2 - åœ¨çº¿è½¬æ¢:")
    print("  è®¿é—®: https://convertio.co/zh/wav-mp3/")
    print("  ä¸Šä¼ WAVæ–‡ä»¶å¹¶ä¸‹è½½MP3")
    print()
    print("æ–¹æ³•3 - ä½¿ç”¨çœŸå®éŸ³é¢‘:")
    print("  å‚è€ƒ: AUDIO_RESOURCE_GUIDE.md")
    print("  ä½¿ç”¨AIç”Ÿæˆæˆ–ä»å…è´¹éŸ³æ•ˆåº“ä¸‹è½½")
    print()
    print("=" * 60)

if __name__ == '__main__':
    main()
