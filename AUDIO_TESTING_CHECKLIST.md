# 音频系统测试清单

## 测试前准备

### 1. 音频文件准备状态
- [ ] 6个音效文件已放置在 `assets/sounds/` 目录
  - [ ] select.mp3
  - [ ] move.mp3
  - [ ] capture.mp3
  - [ ] win.mp3
  - [ ] lose.mp3
  - [ ] click.mp3
- [ ] 6个音乐文件已放置在 `assets/sounds/music/` 目录
  - [ ] main.mp3
  - [ ] gameplay.mp3
  - [ ] victory.mp3
  - [ ] classic.mp3
  - [ ] night.mp3
  - [ ] relaxing.mp3

### 2. 配置检查
- [ ] `pubspec.yaml` 包含正确的 assets 配置
- [ ] 运行 `flutter clean && flutter pub get` 更新资源

### 3. 服务初始化
- [ ] AudioService 在应用启动时初始化
- [ ] MusicService 在应用启动时初始化

---

## 功能测试

### 音效测试（AudioService）

#### 测试1: 选中音效（select.mp3）
**操作步骤**:
1. 启动游戏并进入游戏页面
2. 点击己方棋子

**预期结果**:
- [ ] 听到清脆的选中音效
- [ ] 音效时长约0.1-0.2秒
- [ ] 音效音量适中，不刺耳

#### 测试2: 移动音效（move.mp3）
**操作步骤**:
1. 选中一个棋子
2. 点击合法的移动位置

**预期结果**:
- [ ] 听到平滑的移动音效
- [ ] 音效时长约0.2-0.3秒
- [ ] 音效给人棋子滑动的感觉

#### 测试3: 吃子音效（capture.mp3）
**操作步骤**:
1. 进行游戏直到可以吃子
2. 执行吃子操作

**预期结果**:
- [ ] 听到响亮的吃子音效
- [ ] 音效时长约0.3-0.5秒
- [ ] 音效有明显的冲击感
- [ ] 音量比移动音效稍大

#### 测试4: 胜利音效（win.mp3）
**操作步骤**:
1. 进行游戏直到获胜
2. 观察游戏结束时的音效

**预期结果**:
- [ ] 听到欢快的胜利音效
- [ ] 音效时长约1-2秒
- [ ] 音效令人愉悦

#### 测试5: 失败音效（lose.mp3）
**操作步骤**:
1. 在人机对战中故意输掉游戏
2. 观察游戏结束时的音效

**预期结果**:
- [ ] 听到低沉的失败音效
- [ ] 音效时长约1-2秒
- [ ] 音效表达遗憾但不过于消极

#### 测试6: 点击音效（click.mp3）
**操作步骤**:
1. 在主菜单或游戏页面
2. 点击各种UI按钮（开始游戏、设置等）

**预期结果**:
- [ ] 听到简短的点击音效
- [ ] 音效时长约0.1秒
- [ ] 音效清脆但音量较小

### 音乐测试（MusicService）

#### 测试7: 主菜单音乐（main.mp3）
**操作步骤**:
1. 启动应用
2. 停留在主菜单页面

**预期结果**:
- [ ] 自动播放主菜单背景音乐
- [ ] 音乐轻松愉快
- [ ] 音乐可循环播放
- [ ] 音量适中，不盖过音效

#### 测试8: 游戏音乐（gameplay.mp3）
**操作步骤**:
1. 从主菜单进入游戏
2. 观察音乐切换

**预期结果**:
- [ ] 进入游戏时自动切换到游戏音乐
- [ ] 音乐切换平滑，无突兀
- [ ] 游戏音乐节奏适中，有助于思考
- [ ] 音乐可循环播放

#### 测试9: 胜利音乐（victory.mp3）
**操作步骤**:
1. 进行游戏直到获胜
2. 观察游戏结束时的音乐

**预期结果**:
- [ ] 获胜时自动切换到胜利音乐
- [ ] 音乐欢快激昂
- [ ] 音乐播放完毕后停止（不循环）

#### 测试10: 经典主题音乐（classic.mp3）
**操作步骤**:
1. 进入设置页面
2. 切换到经典主题

**预期结果**:
- [ ] 音乐自动切换到经典主题
- [ ] 音乐风格古典优雅
- [ ] 音乐可循环播放

#### 测试11: 夜间主题音乐（night.mp3）
**操作步骤**:
1. 进入设置页面
2. 切换到夜间主题

**预期结果**:
- [ ] 音乐自动切换到夜间主题
- [ ] 音乐舒缓宁静
- [ ] 音量比其他主题稍低
- [ ] 音乐可循环播放

#### 测试12: 轻松主题音乐（relaxing.mp3）
**操作步骤**:
1. 进入设置页面
2. 切换到轻松主题

**预期结果**:
- [ ] 音乐自动切换到轻松主题
- [ ] 音乐轻松休闲
- [ ] 音乐可循环播放

### 控制功能测试

#### 测试13: 音效开关
**操作步骤**:
1. 进入设置页面
2. 关闭音效开关
3. 返回游戏，执行各种操作

**预期结果**:
- [ ] 关闭后所有音效停止播放
- [ ] 再次开启后音效恢复正常

#### 测试14: 音乐开关
**操作步骤**:
1. 进入设置页面
2. 关闭音乐开关

**预期结果**:
- [ ] 关闭后背景音乐停止播放
- [ ] 再次开启后音乐恢复播放
- [ ] 恢复时播放当前场景对应的音乐

#### 测试15: 音效音量控制
**操作步骤**:
1. 进入设置页面
2. 调整音效音量滑块
3. 返回游戏测试音效

**预期结果**:
- [ ] 音量调整立即生效
- [ ] 音效音量随滑块变化
- [ ] 音量范围0-100%可用

#### 测试16: 音乐音量控制
**操作步骤**:
1. 进入设置页面
2. 调整音乐音量滑块

**预期结果**:
- [ ] 音量调整立即生效
- [ ] 音乐音量随滑块变化
- [ ] 音量范围0-100%可用

### 场景切换测试

#### 测试17: 菜单 → 游戏 → 菜单
**操作步骤**:
1. 在主菜单（播放main.mp3）
2. 开始游戏（切换到gameplay.mp3）
3. 返回主菜单（切换回main.mp3）

**预期结果**:
- [ ] 每次切换音乐平滑过渡
- [ ] 没有音乐重叠或静音间隙
- [ ] 返回菜单时音乐从头开始或继续播放（根据设计决定）

#### 测试18: 游戏 → 获胜 → 新游戏
**操作步骤**:
1. 游戏中（播放gameplay.mp3）
2. 获胜（切换到victory.mp3）
3. 开始新游戏（切换回gameplay.mp3）

**预期结果**:
- [ ] 胜利音乐播放完整
- [ ] 新游戏开始时切换回游戏音乐
- [ ] 音乐切换自然

#### 测试19: 多次快速切换主题
**操作步骤**:
1. 在设置页面快速切换多个主题

**预期结果**:
- [ ] 每次切换都能正确播放对应音乐
- [ ] 没有音乐加载错误
- [ ] 没有音乐卡顿或崩溃

---

## 性能测试

### 测试20: 内存占用
**操作步骤**:
1. 启动应用并播放音乐
2. 使用性能分析工具监控内存

**预期结果**:
- [ ] 音频播放时内存占用稳定
- [ ] 没有明显的内存泄漏
- [ ] 切换音乐时内存正常释放

### 测试21: 响应速度
**操作步骤**:
1. 快速执行多个需要播放音效的操作

**预期结果**:
- [ ] 音效播放延迟 < 100ms
- [ ] 连续音效不会相互干扰
- [ ] UI操作不因音效播放而卡顿

### 测试22: 资源加载
**操作步骤**:
1. 首次启动应用
2. 观察音频加载过程

**预期结果**:
- [ ] 应用启动时间 < 3秒
- [ ] 音频预加载不阻塞UI显示
- [ ] 加载失败有友好提示（如果适用）

---

## 兼容性测试

### 测试23: Android平台
**测试设备**: _______________

**预期结果**:
- [ ] 所有音效正常播放
- [ ] 所有音乐正常播放
- [ ] 音量控制正常
- [ ] 切换音乐平滑

### 测试24: iOS平台
**测试设备**: _______________

**预期结果**:
- [ ] 所有音效正常播放
- [ ] 所有音乐正常播放
- [ ] 音量控制正常
- [ ] 切换音乐平滑

### 测试25: Web平台
**测试浏览器**: _______________

**预期结果**:
- [ ] 所有音效正常播放
- [ ] 所有音乐正常播放
- [ ] 音量控制正常
- [ ] 切换音乐平滑

---

## 边界条件测试

### 测试26: 音频文件缺失
**操作步骤**:
1. 删除一个音效文件
2. 启动应用并触发对应音效

**预期结果**:
- [ ] 应用不崩溃
- [ ] 控制台有友好的错误日志
- [ ] 其他音效仍可正常播放

### 测试27: 音频文件损坏
**操作步骤**:
1. 替换一个音频文件为损坏文件
2. 启动应用并播放对应音频

**预期结果**:
- [ ] 应用不崩溃
- [ ] 有错误处理机制
- [ ] 其他音频仍可正常播放

### 测试28: 极端音量设置
**操作步骤**:
1. 将音量设置为0
2. 将音量设置为100

**预期结果**:
- [ ] 音量为0时完全静音
- [ ] 音量为100时不失真
- [ ] 音量滑块边界值正确处理

---

## 集成测试

### 测试29: 完整游戏流程
**操作步骤**:
1. 启动应用（main.mp3）
2. 开始游戏（gameplay.mp3）
3. 执行选中、移动、吃子操作（对应音效）
4. 获胜（win.mp3 + victory.mp3）
5. 返回菜单（main.mp3）

**预期结果**:
- [ ] 所有音效和音乐按预期播放
- [ ] 音乐切换流畅
- [ ] 音效和音乐不冲突
- [ ] 整体体验流畅自然

### 测试30: 设置持久化
**操作步骤**:
1. 调整音效和音乐设置
2. 关闭应用
3. 重新启动应用

**预期结果**:
- [ ] 音效开关状态保持
- [ ] 音乐开关状态保持
- [ ] 音量设置保持
- [ ] 音乐主题设置保持

---

## 用户体验测试

### 测试31: 音效音量平衡
**评估标准**:
- [ ] 不同音效之间音量相对平衡
- [ ] 没有某个音效过大或过小
- [ ] 音效不会盖过音乐
- [ ] 音乐不会干扰音效辨识

### 测试32: 音乐循环自然度
**评估标准**:
- [ ] 循环音乐首尾衔接平滑
- [ ] 没有明显的断点或突兀感
- [ ] 长时间播放不令人厌烦

### 测试33: 整体音频品质
**评估标准**:
- [ ] 音频文件无杂音
- [ ] 音质清晰
- [ ] 适合游戏氛围
- [ ] 符合设计文档要求

---

## 问题记录

### 发现的问题
| 编号 | 测试项 | 问题描述 | 严重程度 | 状态 |
|------|--------|---------|---------|------|
| 1    |        |         | 高/中/低 | 待修复/已修复 |
| 2    |        |         |         |      |
| 3    |        |         |         |      |

### 优化建议
1. 
2. 
3. 

---

## 测试总结

**测试日期**: _______________  
**测试人员**: _______________  
**通过率**: _____% (通过测试项 / 总测试项)

### 整体评估
- [ ] 所有关键测试项通过
- [ ] 音效系统完全可用
- [ ] 音乐系统完全可用
- [ ] 用户体验良好
- [ ] 可以发布

### 待改进项
- 
- 
- 

### 签字确认
测试人员: _______________  
日期: _______________
